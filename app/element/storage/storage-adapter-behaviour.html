<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="storage-adapter-behaviour">
    <script>
        class StorageAdapterBehaviour extends Polymer.Element {

            static get is() {
                return 'storage-adapter-behaviour';
            }

            static get properties() {
                return {

                    storageName: {
                        type: String,
                        readOnly: true

                    },

                    storage: {
                        type: Object,
                        readOnly: true
                    }
                }
            }

            ready() {
                super.ready();

                if (!this.storageName || !serviceManager.get('StoragePluginManager').has(this.storageName)) {
                    throw `No storage set "${this.storageName}"`
                }

                this._setStorage(serviceManager.get('StoragePluginManager').get(this.storageName));
            }

            /**
             * @param {string} type
             * @param listener
             */
            addStorageListener(type, listener) {
                this.storage.eventManager.on(type, listener);
            }

            /**
             * @param evt
             */
            _updateResource(evt) {

                this.storage.update(evt.detail)
                    .then((data) => {

                    });
            }
        }
    </script>
</dom-module>
